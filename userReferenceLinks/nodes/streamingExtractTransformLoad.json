{
  "id": "f6291c7a-0e29-470e-9505-c79fe2be6637",
  "name": "Extract Tranform Load Users Reference Links",
  "description": "",
  "deserializeAs": "StreamingExtractTransformLoadTask",
  "extractors": [
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/a8139640-3e16-11ea-8581-6db00aef5154/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json"
      },
      "mergeStrategy": "CONCAT",
      "comparisons": [],
      "mappings": []
    },
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/b6a216a0-3e16-11ea-a4fd-8bf52bcc19cd/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json"
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/EXTERNAL_SYSTEM_ID",
          "targetProperty": "/EXTERNAL_SYSTEM_ID"
        }
      ],
      "mappings": [
        {
          "toProperty": "MSDB_EXTERNAL_SYSTEM_ID",
          "fromProperty": "/EXTERNAL_SYSTEM_ID"
        },
        {
          "toProperty": "MSDB_PATRON_ID",
          "fromProperty": "/PATRON_ID"
        }
      ]
    },
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/afd73260-3e16-11ea-a9be-b9b6efee8f9f/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json"
      },
      "mergeStrategy": "CONCAT",
      "comparisons": [],
      "mappings": []
    }
  ],
  "processors": [
    {
      "functionName": "processUserReferenceLinks",
      "scriptType": "JS",
      "code": "processUserReferenceLinks.js",
      "buffer": 10000,
      "delay": 0
    },
    {
      "functionName": "processFlatMapReferenceLinks",
      "scriptType": "JS",
      "code": "processFlatMapReferenceLinks.js"
    }
  ],
  "requests": [
    {
      "url": "{{mod-external-reference-resolver-internal}}/batch/referenceLinks",
      "method": "POST",
      "contentType": "application/json",
      "accept": "application/json"
    }
  ],
  "inputVariables": [],
  "outputVariable": {
    "key": "results",
    "type": "PROCESS"
  },
  "asyncBefore": false,
  "asyncAfter": false
}