{
    "id": "78ae1271-bcf8-452f-a3de-7e4583ba8017",
    "name": "Query list of books from a given call number range.",
    "description": "",
    "deserializeAs": "DatabaseQueryTask",
    "inputVariables": [
        {
          "key": "booksCallNumberQuery",
          "type": "LOCAL"
        },
        {
          "key": "tenantId",
          "type": "PROCESS"
        },
        {
          "key": "timestamp",
          "type": "PROCESS"
        }
    ],
    "outputVariable": { },
    "designation": "ldp",
    "query": "WITH MaxLength AS (SELECT MAX(LENGTH(he.call_number)) AS max_len FROM folio_reporting.holdings_ext he) SELECT * FROM folio_reporting.item_ext ie JOIN folio_reporting.holdings_ext he ON ie.holdings_record_id = he.holdings_id CROSS JOIN MaxLength WHERE UPPER(he.call_number) >= UPPER('a') AND UPPER(he.call_number) <= RPAD(UPPER('b9'), max_len, 'Ã¿') ORDER BY he.call_number;",
    "outputPath": "/mnt/workflows/${tenantId}/books-call-number/checked-out-books-report-${timestamp}.tsv",
    "resultType": "CSV",
    "includeHeader": true,
    "asyncBefore": true
  }