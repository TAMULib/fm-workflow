{
  "id": "92cf5adb-686b-4f41-be9b-472534fe8da3",
  "name": "Extract Tranform Load Users",
  "description": "",
  "deserializeAs": "StreamingExtractTransformLoadTask",
  "extractors": [
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/b564e765-4284-42c8-adff-37fafd2c7507/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": "{}"
      },
      "mergeStrategy": "CONCAT",
      "comparisons": [],
      "mappings": []
    },
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/d0e5d47e-79f0-43b8-a001-ef34873c84ee/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": "{}"
      },
      "mergeStrategy": "MERGE",
      "comparisons": [
        {
          "sourceProperty": "/EXTERNAL_SYSTEM_ID",
          "targetProperty": "/EXTERNAL_SYSTEM_ID"
        }
      ],
      "mappings": []
    },
    {
      "request": {
        "url": "{{mod-data-extractor}}/extractors/96b02e0b-850b-4f5f-88cd-e41dacfec581/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": "{}"
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/EXTERNAL_SYSTEM_ID",
          "targetProperty": "/UIN"
        }
      ],
      "mappings": [
        {
          "toProperty": "netid",
          "fromProperty": "/TAMU_NETID"
        }
      ]
    },
    {
      "request": {
        "url": "{{mod-external-reference-resolver-internal}}/streaming/referenceLinks/type/0ed6f994-8dbd-4827-94c0-905504169c90?orderClass=String",
        "method": "GET",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": ""
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/EXTERNAL_SYSTEM_ID",
          "targetProperty": "/externalReference"
        },
        {
          "sourceProperty": "/SCHEMA",
          "targetProperty": "/type/name"
        }
      ],
      "mappings": [
        {
          "toProperty": "id",
          "fromProperty": "/folioReference"
        }
      ]
    },
    {
      "request": {
        "url": "{{mod-external-reference-resolver-internal}}/streaming/referenceLinks/type/426ce32f-388c-4edf-9c79-d6b8348148a0?orderClass=String",
        "method": "GET",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": ""
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/EXTERNAL_SYSTEM_ID",
          "targetProperty": "/externalReference"
        },
        {
          "sourceProperty": "/SCHEMA",
          "targetProperty": "/type/name"
        }
      ],
      "mappings": [
        {
          "toProperty": "id",
          "fromProperty": "/folioReference"
        }
      ]
    }
  ],
  "processors": [
    {
      "functionName": "processSetupUserData",
      "scriptType": "JS",
      "code": "processSetupUserData.js"
    },
    {
      "functionName": "processFlatData",
      "scriptType": "JS",
      "code": "processFlatData.js"
    },
    {
      "functionName": "processUserAddress",
      "scriptType": "JS",
      "code": "processUserAddress.js"
    },
    {
      "functionName": "processPatronGroup",
      "scriptType": "JS",
      "code": "processPatronGroup.js",
      "buffer": 5000,
      "delay": 2500
    },
    {
      "functionName": "processFinalizeData",
      "scriptType": "JS",
      "code": "processFinalizeData.js"
    }
  ],
  "requests": [
    {
      "url": "{{okapi}}/user-import",
      "method": "POST",
      "contentType": "application/json",
      "accept": "application/json",
      "bodyTemplate": ""
    }
  ],
  "inputVariables": [],
  "outputVariable": {
    "key": "results",
    "type": "PROCESS"
  },
  "asyncBefore": false,
  "asyncAfter": false
}