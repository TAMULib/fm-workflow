{
  "id": "306113a1-6897-4da9-93ab-287a4f8a8996",
  "name": "Extract Tranform Load Users",
  "description": "",
  "deserializeAs": "StreamingExtractTransformLoadTask",
  "extractors": [
    {
      "request": {
        "url": "{{mod-data-extractor-internal}}/extractors/c6b5a9b8-0044-11ea-8d71-362b9e155667/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json"
      },
      "mergeStrategy": "CONCAT",
      "comparisons": [],
      "mappings": []
    },
    {
      "request": {
        "url": "{{mod-data-extractor-internal}}/extractors/d12ef318-0044-11ea-8d71-362b9e155667/stream",
        "method": "POST",
        "contentType": "application/stream+json",
        "accept": "application/stream+json"
      },
      "mergeStrategy": "MERGE",
      "comparisons": [
        {
          "sourceProperty": "/VENDOR_ID",
          "targetProperty": "/VENDOR_ID"
        },
        {
          "sourceProperty": "/SCHEMA",
          "targetProperty": "/SCHEMA"
        }
      ],
      "mappings": []
    },
    {
      "request": {
        "url": "{{mod-external-reference-resolver-internal}}/streaming/referenceLinks/08c7dd18-dbaf-11e9-8a34-2a2ae2dbcce4",
        "method": "GET",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": ""
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/VENDOR_ID",
          "targetProperty": "/externalReference"
        },
        {
          "sourceProperty": "/SCHEMA",
          "targetProperty": "/type/name"
        }
      ],
      "mappings": [
        {
          "toProperty": "folioReference",
          "fromProperty": "/folioReference"
        }
      ]
    },
    {
      "request": {
        "url": "{{mod-external-reference-resolver-internal}}/streaming/referenceLinks/b427aa0a-96f2-4338-8b3c-2ddcdca6cfe4",
        "method": "GET",
        "contentType": "application/stream+json",
        "accept": "application/stream+json",
        "bodyTemplate": ""
      },
      "mergeStrategy": "ENHANCE",
      "comparisons": [
        {
          "sourceProperty": "/VENDOR_ID",
          "targetProperty": "/externalReference"
        },
        {
          "sourceProperty": "/SCHEMA",
          "targetProperty": "/type/name"
        }
      ],
      "mappings": [
        {
          "toProperty": "folioReference",
          "fromProperty": "/folioReference"
        }
      ]
    }
  ],
  "processors": [
    {
      "functionName": "processSetupVendorData",
      "scriptType": "JS",
      "code": "processSetupVendorData.js"
    },
    {
      "functionName": "processFlatData",
      "scriptType": "JS",
      "code": "processFlatData.js"
    },
    {
      "functionName": "processContacts",
      "scriptType": "JS",
      "code": "processContacts.js"
    },
    {
      "functionName": "processAddresses",
      "scriptType": "JS",
      "code": "processAddresses.js"
    },
    {
      "functionName": "processPhoneNumbers",
      "scriptType": "JS",
      "code": "processPhoneNumbers.js"
    },
    {
      "functionName": "processEmails",
      "scriptType": "JS",
      "code": "processEmails.js"
    },
    {
      "functionName": "processURLs",
      "scriptType": "JS",
      "code": "processURLs.js"
    },
    {
      "functionName": "processAccounts",
      "scriptType": "JS",
      "code": "processAccounts.js"
    },
    {
      "functionName": "processFinalizeData",
      "scriptType": "JS",
      "code": "processFinalizeData.js"
    }
  ],
  "requests": [
    {
      "url": "{{okapi}}/organizations-storage/contacts",
      "method": "POST",
      "contentType": "application/json",
      "accept": "application/json",
      "iterable": true,
      "iterableKey": "contacts",
      "responseKey": "id"
    },
    {
      "url": "{{okapi}}/organizations-storage/organizations",
      "method": "POST",
      "contentType": "application/json",
      "accept": "application/json"
    }
  ],
  "inputVariables": [],
  "outputVariable": {
    "key": "results",
    "type": "PROCESS"
  },
  "asyncBefore": false,
  "asyncAfter": false
}