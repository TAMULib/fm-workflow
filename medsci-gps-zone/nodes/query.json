{
  "id": "51c7b363-25bf-4886-a9f1-00eef0e429fb",
  "name": "Query Authorization List",
  "description": "",
  "deserializeAs": "DatabaseQueryTask",
  "inputVariables": [
    {
      "key": "timestamp",
      "type": "PROCESS"
    }
  ],
  "outputVariable": {},
  "outputPath": "/mnt/workflows/medsci-gps-zone/grad_access_${timestamp}.txt",
  "resultType": "TSV",
  "designation": "divit",
  "query": "SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMHSC') AND (stu.ACAD_COLLEGE IN ('MD', 'CP', 'NU', 'PM', 'MN', 'NS')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') OR (stu.INSTITUTION_ABBR = 'TAMHSC') AND (stu.ACAD_COLLEGE IN ('PH')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) = 'G') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR UNION SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.ACAD_COLLEGE IN ('MD', 'CP', 'NU', 'PM', 'MN', 'NS')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') OR (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.ACAD_COLLEGE IN ('EH', 'PH')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) = 'G') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR UNION SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.ACAD_COLLEGE IN ('VM', 'VT')) AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) IN ('G', 'V')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR UNION SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.ACAD_COLLEGE IN ('ED', 'EH')) AND (stu.ACAD_DEPT = 'HLKN') AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) IN ('G')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR UNION SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.ACAD_COLLEGE IN ('AG')) AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) IN ('G')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR UNION SELECT DISTINCT stu.UIN AS uin, id.ID_CARD_NUM AS idcard, stu.ACAD_COLLEGE AS college, MAX(sr.SEMESTER) AS semester, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR FROM STUDENTS AS stu LEFT OUTER JOIN ID_CARDS AS id ON stu.UIN = id.UIN LEFT OUTER JOIN SECTION_ROSTERS AS sr ON stu.UIN = sr.UIN WHERE (stu.INSTITUTION_ABBR = 'TAMU') AND (stu.PRIMARY_MAJOR IN ('BIOT', 'GENE', 'MEPS', 'NRSC', 'TOXI', 'BMEN')) AND (SUBSTRING(stu.CLASSIFICATION, 1, 1) IN ('G')) AND (stu.ENROLL_STATUS_NAME = 'Enrolled') GROUP BY stu.UIN, id.ID_CARD_NUM, stu.ACAD_COLLEGE, stu.ENROLL_STATUS_NAME, stu.PRIMARY_MAJOR ORDER BY uin",
  "asyncBefore": true
}
