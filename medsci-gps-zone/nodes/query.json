{
  "id": "51c7b363-25bf-4886-a9f1-00eef0e429fb",
  "name": "Query Authorization List",
  "description": "",
  "deserializeAs": "DatabaseQueryTask",
  "inputVariables": [
    {
      "key": "timestamp",
      "type": "PROCESS"
    }
  ],
  "outputVariable": {},
  "outputPath": "/mnt/workflows/medsci-gps-zone/grad_access_${timestamp}.txt",
  "resultType": "TSV",
  "designation": "divit",
  "query": " SELECT distinct stu.uin AS uin, id_card_num AS idcard, stu.acad_college AS college, max(sr.semester) as semester, enroll_status_name, primary_major FROM students stu left outer join id_cards id on stu.uin = id.uin left outer join section_rosters sr on stu.uin=sr.uin WHERE institution_abbr = 'TAMHSC' AND ( acad_college in ('MD','CP','NU') OR (acad_college in ('PH') AND substring(stu.classification,1,1) = 'G') ) AND stu.enroll_status_name = 'Enrolled' GROUP BY stu.uin, id_card_num, stu.acad_college, enroll_status_name, primary_major union SELECT distinct stu.uin AS uin, id_card_num AS idcard, stu.acad_college AS college, max(sr.semester) as semester, enroll_status_name, primary_major FROM students stu left outer join id_cards id on stu.uin = id.uin left outer join section_rosters sr on stu.uin=sr.uin WHERE institution_abbr = 'TAMU' AND acad_college in ('VM') AND substring(stu.classification,1,1) in ('G','V') AND stu.enroll_status_name = 'Enrolled' GROUP BY stu.uin, id_card_num, stu.acad_college, enroll_status_name, primary_major union SELECT distinct stu.uin AS uin, id_card_num AS idcard, stu.acad_college AS college, max(sr.semester) as semester, enroll_status_name, primary_major FROM students stu left outer join id_cards id on stu.uin = id.uin left outer join section_rosters sr on stu.uin=sr.uin WHERE institution_abbr = 'TAMU' AND acad_college in ('ED') AND acad_dept = 'HLKN' AND substring(stu.classification,1,1) in ('G') AND stu.enroll_status_name = 'Enrolled' GROUP BY stu.uin, id_card_num, stu.acad_college, enroll_status_name, primary_major union SELECT distinct stu.uin AS uin, id_card_num AS idcard, stu.acad_college AS college, max(sr.semester) as semester, enroll_status_name, primary_major FROM students stu left outer join id_cards id on stu.uin = id.uin left outer join section_rosters sr on stu.uin=sr.uin WHERE institution_abbr = 'TAMU' AND acad_college in ('AG') AND substring(stu.classification,1,1) in ('G') AND stu.enroll_status_name = 'Enrolled' GROUP BY stu.uin, id_card_num, stu.acad_college, enroll_status_name, primary_major union SELECT distinct stu.uin AS uin, id_card_num AS idcard, stu.acad_college AS college, max(sr.semester) as semester, enroll_status_name, primary_major FROM students stu left outer join id_cards id on stu.uin = id.uin left outer join section_rosters sr on stu.uin=sr.uin WHERE institution_abbr = 'TAMU' AND primary_major in ('BIOT', 'GENE', 'MEPS', 'NRSC', 'TOXI', 'BMEN') AND substring(stu.classification,1,1) in ('G') AND stu.enroll_status_name = 'Enrolled' GROUP BY stu.uin, id_card_num, stu.acad_college, enroll_status_name, primary_major",
  "asyncBefore": true
}
